<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lesson ‚Äî Learn ‚Üí Test</title>
  <style>
    :root{
      --bg:#0b0f19;
      --paper:rgba(255,255,255,.06);
      --paper2:rgba(255,255,255,.085);
      --border:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.65);
      --accent:#8b5cf6;
      --accent2:#22d3ee;
      --good:#22c55e;
      --bad:#ef4444;
      --radius:18px;
      --shadow:0 18px 48px rgba(0,0,0,.38);
      --font:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; font-family:var(--font); color:var(--text);
      background:
        radial-gradient(1200px 650px at 20% 0%, rgba(139,92,246,.22), transparent 60%),
        radial-gradient(900px 500px at 90% 10%, rgba(34,211,238,.16), transparent 55%),
        linear-gradient(180deg, #050814, #070a12 45%, #050814);
      min-height:100vh;
    }

    .wrap{width:min(980px, 100%); margin:0 auto; padding:22px 16px 64px;}
    .shell{
      border:1px solid var(--border);
      background:linear-gradient(180deg, var(--paper), rgba(255,255,255,.03));
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    /* Top bar */
    .topbar{
      position:sticky; top:0; z-index:10;
      border-bottom:1px solid var(--border);
      background:linear-gradient(90deg, rgba(139,92,246,.14), rgba(34,211,238,.10));
      backdrop-filter: blur(10px);
    }
    .topbar-inner{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding:14px 16px;
    }
    .brand{display:flex; flex-direction:column; gap:4px}
    .brand h1{margin:0; font-size:15px; font-weight:750; letter-spacing:.2px}
    .brand p{margin:0; font-size:12.5px; color:var(--muted)}
    .pill{
      font-size:12px; color:rgba(255,255,255,.82);
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      padding:6px 10px; border-radius:999px; white-space:nowrap;
    }
    .progress{
      height:10px;
      border-top:1px solid var(--border);
      background:rgba(255,255,255,.05);
    }
    .bar{
      height:100%; width:0%;
      background:linear-gradient(90deg, var(--accent), var(--accent2));
      transition:width 320ms ease;
    }

    /* Content */
    .content{padding:18px 18px 24px}
    .section{padding:6px 0 0}
    .section-title{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin:8px 0 12px;
    }
    .section-title h2{margin:0; font-size:14px; letter-spacing:.3px; color:rgba(255,255,255,.82); font-weight:800; text-transform:uppercase}
    .actions{display:flex; gap:10px; flex-wrap:wrap}

    button{
      appearance:none; border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      color:var(--text); font-weight:750;
      padding:10px 12px; border-radius:12px; cursor:pointer;
      transition:background 120ms ease, border-color 120ms ease;
    }
    button:hover{background:rgba(255,255,255,.085)}
    button.primary{
      border-color:rgba(139,92,246,.55);
      background:linear-gradient(90deg, rgba(139,92,246,.22), rgba(34,211,238,.14));
    }

    /* Notion-ish typography */
    .article h3{margin:18px 0 8px; font-size:18px; font-weight:850}
    .article p{margin:8px 0; color:rgba(255,255,255,.86); line-height:1.6; font-size:15px}
    .article ul{margin:8px 0 8px 18px; color:rgba(255,255,255,.84); line-height:1.6}
    .article code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 13px;
      padding:2px 6px; border-radius:10px;
      background:rgba(255,255,255,.06); border:1px solid var(--border);
    }

    .callout{
      margin:14px 0; padding:12px 12px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
      border-radius:14px;
      display:flex; gap:10px;
    }
    .emoji{width:22px; text-align:center; flex:0 0 auto}
    .callout b{color:rgba(255,255,255,.92)}
    .table{
      width:100%;
      border-collapse:separate; border-spacing:0;
      border:1px solid var(--border);
      border-radius:14px; overflow:hidden;
      margin:12px 0;
      background:rgba(255,255,255,.03);
    }
    .table th,.table td{
      padding:10px 10px;
      border-bottom:1px solid var(--border);
      border-right:1px solid var(--border);
      font-size:13.5px; line-height:1.45;
      color:rgba(255,255,255,.84);
      vertical-align:top;
    }
    .table th{background:rgba(255,255,255,.05); font-weight:800}
    .table tr:last-child td{border-bottom:none}
    .table td:last-child,.table th:last-child{border-right:none}

    /* Test cards */
    .cards{display:grid; gap:12px; margin-top:10px}
    .card{
      border:1px solid var(--border);
      background:rgba(255,255,255,.045);
      border-radius:16px;
      padding:14px;
    }
    .card.locked{
      opacity:.55;
      filter: blur(.2px);
    }
    .card-head{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      margin-bottom:8px;
    }
    .meta{font-size:12.5px; color:var(--muted)}
    .q{margin:0; font-size:16px; font-weight:850; line-height:1.35}
    .answers{display:grid; gap:10px; margin-top:10px}
    .ans{
      display:flex; gap:10px; align-items:flex-start;
      padding:11px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.05);
      cursor:pointer;
      transition:background 120ms ease, border-color 120ms ease;
    }
    .ans:hover{background:rgba(255,255,255,.075)}
    .radio{margin-top:2px; width:18px; height:18px; border-radius:999px; border:1.5px solid rgba(255,255,255,.35); display:flex; align-items:center; justify-content:center}
    .dot{width:10px; height:10px; border-radius:999px; background:transparent}
    .ans.selected{border-color:rgba(139,92,246,.75); background:rgba(139,92,246,.14)}
    .ans.selected .radio{border-color:rgba(139,92,246,.9)}
    .ans.selected .dot{background:linear-gradient(90deg, var(--accent), var(--accent2))}
    .ans.correct{border-color:rgba(34,197,94,.85); background:rgba(34,197,94,.14)}
    .ans.wrong{border-color:rgba(239,68,68,.85); background:rgba(239,68,68,.12)}
    .label{font-size:14.8px; line-height:1.35; color:rgba(255,255,255,.9)}
    .explain{
      margin-top:10px;
      padding:11px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      color:rgba(255,255,255,.82);
      font-size:13.5px; line-height:1.5;
      display:none;
    }
    .explain.show{display:block}

    .footer-note{margin-top:16px; color:var(--muted); font-size:12.5px; line-height:1.45}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="shell">
      <div class="topbar">
        <div class="topbar-inner">
          <div class="brand">
            <h1 id="lessonTitle">Direct vs Indirect Costs</h1>
            <p id="lessonSubtitle">Learn ‚Üí Test (card-by-card) ‚Ä¢ consistent formatting</p>
          </div>
          <div class="pill" id="pill">Test: 0 / 0</div>
        </div>
        <div class="progress"><div class="bar" id="bar"></div></div>
      </div>

      <div class="content">
        <!-- LEARN -->
        <section class="section" id="learn">
          <div class="section-title">
            <h2>Learn</h2>
            <div class="actions">
              <button class="primary" id="toTestBtn" type="button">Start test</button>
            </div>
          </div>

          <div class="article" id="learnArticle">
            <!-- Replace this content with your lesson (copy/paste your own writing) -->
            <h3>What are direct costs?</h3>
            <p><b>Direct costs</b> can be traced to a specific cost unit (e.g., one product, one job, one service) with confidence.</p>
            <div class="callout">
              <div class="emoji">‚úÖ</div>
              <div><b>Rule of thumb:</b> if you can measure it per unit/job without arbitrary guessing, it‚Äôs probably direct.</div>
            </div>

            <h3>What are indirect costs?</h3>
            <p><b>Indirect costs</b> support production overall and must be shared (apportioned/absorbed) across cost units.</p>
            <div class="callout">
              <div class="emoji">üß†</div>
              <div><b>Think:</b> ‚Äúnecessary, but not traceable to one unit.‚Äù</div>
            </div>

            <h3>Examples table</h3>
            <table class="table">
              <thead>
                <tr>
                  <th>Cost item</th>
                  <th>Direct / Indirect</th>
                  <th>Why</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Raw materials for Product A</td>
                  <td>Direct</td>
                  <td>Traceable to each unit produced.</td>
                </tr>
                <tr>
                  <td>Factory rent</td>
                  <td>Indirect</td>
                  <td>Supports the whole factory; shared across products.</td>
                </tr>
                <tr>
                  <td>Wages of machine operator working only on Job 17</td>
                  <td>Direct</td>
                  <td>Traceable to a specific job.</td>
                </tr>
              </tbody>
            </table>

            <h3>Exam-style tip</h3>
            <p>If the question is ambiguous, justify your choice using the cost unit. ‚ÄúDirect <i>to what</i>?‚Äù is the key phrase.</p>
          </div>

          <p class="footer-note">
            Tip: Keep Learn concise; your advantage is the Test + Apply. You can add an ‚ÄúApply‚Äù section later with scenarios and input boxes.
          </p>
        </section>

        <!-- TEST -->
        <section class="section" id="test" style="margin-top:18px;">
          <div class="section-title">
            <h2>Test</h2>
            <div class="actions">
              <button id="restartBtn" type="button">Restart test</button>
            </div>
          </div>

          <div class="cards" id="cards"></div>

          <p class="footer-note" id="endNote" style="display:none;">
            Finished. You can restart, or scroll back to Learn. (You can also add a results summary card if you want.)
          </p>
        </section>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // EDIT THESE TWO BLOCKS
    // =========================

    const LESSON = {
      title: "Direct vs Indirect Costs",
      subtitle: "AAT Level 2 ‚Ä¢ Clean Learn ‚Üí Test lesson",
    };

    // Question cards down the page (MCQ). correct is index in options array.
    const QUESTIONS = [
      {
        tag: "Definitions",
        q: "Which statement best describes an indirect cost?",
        options: [
          "A cost that can be traced to a specific product unit easily",
          "A cost that supports overall production and must be shared across cost units",
          "A cost that is always variable",
          "A cost that is only found in service businesses"
        ],
        correct: 1,
        explain: "Indirect costs support production overall (e.g., rent, supervision) and are allocated across cost units."
      },
      {
        tag: "Examples",
        q: "Factory rent is usually classified as:",
        options: ["Direct material", "Direct labour", "Indirect cost (overhead)", "Selling expense"],
        correct: 2,
        explain: "Rent supports the whole factory, so it‚Äôs an overhead that must be apportioned/absorbed."
      },
      {
        tag: "Judgement",
        q: "The phrase that helps you decide whether a cost is direct is:",
        options: ["Direct means cheap", "Direct to what cost unit?", "Direct means fixed", "Direct means paid weekly"],
        correct: 1,
        explain: "Always anchor your answer to the cost unit (a job/product/service)."
      }
    ];

    // =========================
    // RENDER + QUIZ LOGIC
    // =========================

    const el = {
      lessonTitle: document.getElementById("lessonTitle"),
      lessonSubtitle: document.getElementById("lessonSubtitle"),
      pill: document.getElementById("pill"),
      bar: document.getElementById("bar"),
      cards: document.getElementById("cards"),
      toTestBtn: document.getElementById("toTestBtn"),
      restartBtn: document.getElementById("restartBtn"),
      endNote: document.getElementById("endNote"),
    };

    el.lessonTitle.textContent = LESSON.title;
    el.lessonSubtitle.textContent = LESSON.subtitle;

    let answeredCount = 0;
    const user = Array(QUESTIONS.length).fill(null);
    const locked = Array(QUESTIONS.length).fill(true);
    locked[0] = false; // first card unlocked

    function updateTop(){
      el.pill.textContent = `Test: ${answeredCount} / ${QUESTIONS.length}`;
      el.bar.style.width = `${(answeredCount / QUESTIONS.length) * 100}%`;
    }

    function scrollToCard(i){
      const card = document.getElementById(`card-${i}`);
      if (!card) return;
      card.scrollIntoView({behavior:"smooth", block:"start"});
    }

    function render(){
      el.cards.innerHTML = "";
      el.endNote.style.display = "none";
      answeredCount = user.filter(v => v !== null).length;
      updateTop();

      QUESTIONS.forEach((q, i) => {
        const card = document.createElement("div");
        card.className = "card" + (locked[i] ? " locked" : "");
        card.id = `card-${i}`;

        const selected = user[i];

        card.innerHTML = `
          <div class="card-head">
            <div class="meta">Question ${i+1} ‚Ä¢ ${q.tag ?? ""}</div>
            <div class="meta">${selected === null ? (locked[i] ? "Locked" : "Answer to continue") : "Answered"}</div>
          </div>
          <p class="q">${q.q}</p>
          <div class="answers" id="answers-${i}"></div>
          <div class="explain" id="explain-${i}"></div>
        `;

        el.cards.appendChild(card);

        const answersEl = document.getElementById(`answers-${i}`);
        const explainEl = document.getElementById(`explain-${i}`);

        // Build answers
        q.options.forEach((opt, idx) => {
          const a = document.createElement("div");
          a.className = "ans" + (selected === idx ? " selected" : "");
          a.innerHTML = `
            <div class="radio"><div class="dot"></div></div>
            <div class="label">${opt}</div>
          `;

          a.addEventListener("click", () => {
            if (locked[i]) return;
            if (user[i] !== null) return; // already answered (one attempt in this template)

            // record
            user[i] = idx;
            answeredCount = user.filter(v => v !== null).length;

            // mark correct/wrong styles
            [...answersEl.children].forEach((node, j) => {
              node.classList.remove("selected");
              if (j === q.correct) node.classList.add("correct");
              if (j === idx && idx !== q.correct) node.classList.add("wrong");
            });

            // explanation
            if (q.explain){
              explainEl.textContent = q.explain;
              explainEl.classList.add("show");
            }

            // unlock next
            if (i + 1 < QUESTIONS.length){
              locked[i + 1] = false;
              render(); // re-render to unlock & update states
              // scroll to the next newly unlocked card
              setTimeout(() => scrollToCard(i + 1), 120);
            } else {
              updateTop();
              el.bar.style.width = `100%`;
              el.endNote.style.display = "block";
            }
          });

          answersEl.appendChild(a);
        });

        // If already answered, show state (correct/wrong + explanation)
        if (selected !== null){
          [...answersEl.children].forEach((node, j) => {
            node.classList.remove("selected");
            if (j === q.correct) node.classList.add("correct");
            if (j === selected && selected !== q.correct) node.classList.add("wrong");
          });
          if (q.explain){
            explainEl.textContent = q.explain;
            explainEl.classList.add("show");
          }
        }
      });

      updateTop();
    }

    function restart(){
      for (let i=0;i<user.length;i++) user[i] = null;
      for (let i=0;i<locked.length;i++) locked[i] = true;
      locked[0] = false;
      render();
      scrollToCard(0);
    }

    el.toTestBtn.addEventListener("click", () => {
      document.getElementById("test").scrollIntoView({behavior:"smooth", block:"start"});
      // Optionally scroll to first card
      setTimeout(() => scrollToCard(0), 150);
    });

    el.restartBtn.addEventListener("click", restart);

    render();
  </script>
</body>
</html>

