<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Notion Quiz Embed</title>
  <style>
    :root{
      --bg: #0b0f19;
      --card: rgba(255,255,255,0.06);
      --card2: rgba(255,255,255,0.09);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.65);
      --border: rgba(255,255,255,0.12);
      --good: #22c55e;
      --bad: #ef4444;
      --accent: #8b5cf6;
      --accent2:#22d3ee;
      --shadow: 0 16px 40px rgba(0,0,0,0.35);
      --radius: 18px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background: radial-gradient(1200px 600px at 20% 10%, rgba(139,92,246,0.25), transparent 60%),
                  radial-gradient(900px 500px at 80% 0%, rgba(34,211,238,0.18), transparent 55%),
                  linear-gradient(180deg, #050814, #070a12 40%, #050814);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .wrap{
      width:min(820px, 100%);
    }
    .card{
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.03));
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .header{
      padding:18px 18px 14px 18px;
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      border-bottom:1px solid var(--border);
      background: linear-gradient(90deg, rgba(139,92,246,0.14), rgba(34,211,238,0.10));
    }
    .title{
      display:flex; flex-direction:column; gap:4px;
    }
    .title h1{
      font-size:16px;
      margin:0;
      letter-spacing:0.2px;
      font-weight:650;
    }
    .title p{
      margin:0;
      font-size:12.5px;
      color:var(--muted);
    }
    .pill{
      font-size:12px;
      color:rgba(255,255,255,0.8);
      border:1px solid var(--border);
      background: rgba(255,255,255,0.06);
      padding:6px 10px;
      border-radius:999px;
      white-space:nowrap;
    }
    .content{ padding:18px; }
    .progress{
      height:10px;
      background: rgba(255,255,255,0.06);
      border:1px solid var(--border);
      border-radius:999px;
      overflow:hidden;
      margin-bottom:14px;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      transition: width 350ms ease;
    }
    .q-meta{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      margin-bottom:10px;
    }
    .q-meta .small{ font-size:12.5px; color:var(--muted); }
    .question{
      margin:0 0 14px 0;
      font-size:18px;
      line-height:1.35;
      font-weight:650;
    }
    .answers{
      display:grid;
      gap:10px;
      margin-bottom:14px;
    }
    .ans{
      display:flex;
      align-items:flex-start;
      gap:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.05);
      cursor:pointer;
      transition: transform 80ms ease, background 120ms ease, border-color 120ms ease;
    }
    .ans:hover{ background: rgba(255,255,255,0.075); }
    .ans:active{ transform: scale(0.995); }
    .radio{
      margin-top:2px;
      width:18px; height:18px;
      border-radius:999px;
      border:1.5px solid rgba(255,255,255,0.35);
      display:flex; align-items:center; justify-content:center;
      flex:0 0 auto;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: transparent;
    }
    .ans.selected{
      border-color: rgba(139,92,246,0.75);
      background: rgba(139,92,246,0.14);
    }
    .ans.selected .radio{ border-color: rgba(139,92,246,0.9); }
    .ans.selected .dot{ background: linear-gradient(90deg, var(--accent), var(--accent2)); }
    .ans.correct{
      border-color: rgba(34,197,94,0.85);
      background: rgba(34,197,94,0.14);
    }
    .ans.wrong{
      border-color: rgba(239,68,68,0.85);
      background: rgba(239,68,68,0.12);
    }
    .label{
      font-size:15px;
      line-height:1.35;
    }
    .explain{
      margin-top:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.045);
      color:rgba(255,255,255,0.84);
      font-size:13.5px;
      line-height:1.45;
      display:none;
    }
    .explain.show{ display:block; }
    .actions{
      display:flex;
      gap:10px;
      justify-content:space-between;
      align-items:center;
      margin-top:14px;
      flex-wrap:wrap;
    }
    button{
      appearance:none;
      border:1px solid var(--border);
      background: rgba(255,255,255,0.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      font-weight:650;
      cursor:pointer;
      transition: background 120ms ease, border-color 120ms ease;
    }
    button:hover{ background: rgba(255,255,255,0.085); }
    button.primary{
      border-color: rgba(139,92,246,0.55);
      background: linear-gradient(90deg, rgba(139,92,246,0.22), rgba(34,211,238,0.14));
    }
    button.primary:disabled{
      opacity:0.55;
      cursor:not-allowed;
    }
    .ghost{
      border-color: transparent;
      background: transparent;
      color: rgba(255,255,255,0.75);
      padding-left:6px;
      padding-right:6px;
    }
    .result{
      display:none;
      padding:18px;
    }
    .result.show{ display:block; }
    .score{
      font-size:26px;
      font-weight:800;
      margin:0 0 6px 0;
    }
    .sub{
      margin:0 0 14px 0;
      color:var(--muted);
      font-size:13.5px;
    }
    .review{
      display:grid;
      gap:10px;
      margin-top:12px;
    }
    .row{
      padding:12px;
      border:1px solid var(--border);
      border-radius:14px;
      background: rgba(255,255,255,0.045);
    }
    .row .q{
      margin:0 0 6px 0;
      font-weight:700;
      font-size:13.5px;
    }
    .row .a{
      margin:0;
      font-size:13px;
      color:rgba(255,255,255,0.8);
      line-height:1.4;
    }
    .tag{
      display:inline-block;
      margin-left:8px;
      font-size:11px;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid var(--border);
      color:rgba(255,255,255,0.75);
      background: rgba(255,255,255,0.05);
      vertical-align:middle;
    }
    .tag.good{ border-color: rgba(34,197,94,0.45); }
    .tag.bad{ border-color: rgba(239,68,68,0.45); }

    /* Notion embed friendliness */
    @media (prefers-color-scheme: light){
      /* keep dark aesthetic anyway; Notion embed backgrounds vary */
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div class="title">
          <h1 id="quizTitle">Quick Quiz</h1>
          <p id="quizSubtitle">One question at a time • Instant feedback • Review at end</p>
        </div>
        <div class="pill" id="pill">0 / 0</div>
      </div>

      <div class="content" id="quiz">
        <div class="progress"><div class="bar" id="bar"></div></div>

        <div class="q-meta">
          <div class="small" id="metaLeft">Question</div>
          <div class="small" id="metaRight"></div>
        </div>

        <p class="question" id="questionText">...</p>

        <div class="answers" id="answers"></div>

        <div class="explain" id="explain"></div>

        <div class="actions">
          <div>
            <button class="ghost" id="restartBtn" type="button">Restart</button>
          </div>
          <div style="display:flex; gap:10px;">
            <button id="checkBtn" class="primary" type="button" disabled>Check</button>
            <button id="nextBtn" class="primary" type="button" style="display:none;">Next</button>
          </div>
        </div>
      </div>

      <div class="result" id="result">
        <p class="score" id="scoreLine"></p>
        <p class="sub" id="scoreSub"></p>
        <button class="primary" id="againBtn" type="button">Try again</button>

        <div class="review" id="review"></div>
      </div>
    </div>
  </div>

<script>
  // --- EDIT YOUR QUESTIONS HERE ---
  // correct is index of the correct option (0..n-1)
  const QUIZ = {
    title: "AAT Level 2 – Mini Quiz",
    subtitle: "Clean, Gemini-ish cards • Built for Notion embeds",
    questions: [
      {
        tag: "Bookkeeping",
        q: "Which document is usually used to record credit sales before posting to the ledger?",
        options: ["Purchase invoice", "Sales invoice", "Credit note", "Statement"],
        correct: 1,
        explain: "Credit sales are evidenced by a sales invoice, then posted to the sales day book / receivables."
      },
      {
        tag: "Costing",
        q: "If variable cost per unit rises (and price is unchanged), what happens to contribution per unit?",
        options: ["It increases", "It decreases", "It stays the same", "It becomes zero automatically"],
        correct: 1,
        explain: "Contribution = Selling price − Variable cost. Higher variable cost reduces contribution."
      },
      {
        tag: "Ethics",
        q: "The fundamental principle that requires accountants to avoid bias is:",
        options: ["Integrity", "Objectivity", "Confidentiality", "Professional competence"],
        correct: 1,
        explain: "Objectivity = not allowing bias, conflicts of interest, or undue influence to override judgement."
      }
    ]
  };

  // --- QUIZ ENGINE ---
  const els = {
    quizTitle: document.getElementById("quizTitle"),
    quizSubtitle: document.getElementById("quizSubtitle"),
    pill: document.getElementById("pill"),
    bar: document.getElementById("bar"),
    metaLeft: document.getElementById("metaLeft"),
    metaRight: document.getElementById("metaRight"),
    questionText: document.getElementById("questionText"),
    answers: document.getElementById("answers"),
    explain: document.getElementById("explain"),
    checkBtn: document.getElementById("checkBtn"),
    nextBtn: document.getElementById("nextBtn"),
    restartBtn: document.getElementById("restartBtn"),
    result: document.getElementById("result"),
    quiz: document.getElementById("quiz"),
    scoreLine: document.getElementById("scoreLine"),
    scoreSub: document.getElementById("scoreSub"),
    review: document.getElementById("review"),
    againBtn: document.getElementById("againBtn"),
  };

  els.quizTitle.textContent = QUIZ.title;
  els.quizSubtitle.textContent = QUIZ.subtitle;

  let i = 0;
  let selected = null;
  let locked = false;
  const userAnswers = Array(QUIZ.questions.length).fill(null);

  function render(){
    const total = QUIZ.questions.length;
    const q = QUIZ.questions[i];

    els.pill.textContent = `${i+1} / ${total}`;
    els.bar.style.width = `${(i / total) * 100}%`;

    els.metaLeft.textContent = `Question ${i+1} of ${total}`;
    els.metaRight.textContent = q.tag ? q.tag : "";

    els.questionText.textContent = q.q;

    els.answers.innerHTML = "";
    els.explain.classList.remove("show");
    els.explain.textContent = "";

    selected = userAnswers[i];
    locked = false;

    q.options.forEach((opt, idx) => {
      const div = document.createElement("div");
      div.className = "ans" + (selected === idx ? " selected" : "");
      div.tabIndex = 0;

      div.innerHTML = `
        <div class="radio"><div class="dot"></div></div>
        <div class="label">${opt}</div>
      `;

      const pick = () => {
        if (locked) return;
        selected = idx;
        userAnswers[i] = idx;
        [...els.answers.children].forEach(c => c.classList.remove("selected"));
        div.classList.add("selected");
        els.checkBtn.disabled = false;
      };

      div.addEventListener("click", pick);
      div.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") { e.preventDefault(); pick(); }
      });

      els.answers.appendChild(div);
    });

    els.checkBtn.style.display = "inline-block";
    els.nextBtn.style.display = "none";
    els.checkBtn.disabled = (selected === null);

    if (selected !== null) els.checkBtn.disabled = false;
  }

  function check(){
    if (selected === null) return;

    const q = QUIZ.questions[i];
    locked = true;

    [...els.answers.children].forEach((node, idx) => {
      node.classList.remove("selected");
      if (idx === q.correct) node.classList.add("correct");
      if (idx === selected && selected !== q.correct) node.classList.add("wrong");
    });

    els.explain.textContent = q.explain || "";
    if (q.explain) els.explain.classList.add("show");

    els.checkBtn.style.display = "none";
    els.nextBtn.style.display = "inline-block";
    els.bar.style.width = `${((i+1) / QUIZ.questions.length) * 100}%`;
  }

  function next(){
    if (i < QUIZ.questions.length - 1){
      i++;
      render();
    } else {
      showResults();
    }
  }

  function showResults(){
    const total = QUIZ.questions.length;
    let score = 0;

    for (let k=0; k<total; k++){
      if (userAnswers[k] === QUIZ.questions[k].correct) score++;
    }

    els.quiz.style.display = "none";
    els.result.classList.add("show");

    els.scoreLine.textContent = `${score} / ${total}`;
    els.scoreSub.textContent = score === total
      ? "Perfect. Nice."
      : "Review below, then run it back.";

    els.review.innerHTML = "";
    QUIZ.questions.forEach((q, k) => {
      const ok = userAnswers[k] === q.correct;
      const row = document.createElement("div");
      row.className = "row";
      row.innerHTML = `
        <p class="q">${q.q}
          <span class="tag ${ok ? "good" : "bad"}">${ok ? "Correct" : "Incorrect"}</span>
        </p>
        <p class="a"><b>Your answer:</b> ${userAnswers[k] === null ? "—" : q.options[userAnswers[k]]}</p>
        <p class="a"><b>Correct:</b> ${q.options[q.correct]}</p>
        ${q.explain ? `<p class="a"><b>Why:</b> ${q.explain}</p>` : ""}
      `;
      els.review.appendChild(row);
    });
  }

  function restart(){
    i = 0;
    for (let k=0; k<userAnswers.length; k++) userAnswers[k] = null;
    els.result.classList.remove("show");
    els.quiz.style.display = "block";
    render();
  }

  els.checkBtn.addEventListener("click", check);
  els.nextBtn.addEventListener("click", next);
  els.restartBtn.addEventListener("click", restart);
  els.againBtn.addEventListener("click", restart);

  render();
</script>
</body>
</html>
